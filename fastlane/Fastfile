# More documentation about how to customize your build
# can be found here:
# https://docs.fastlane.tools
fastlane_version '1.109.0'

default_platform :ios

opt_out_crash_reporting

before_all do
  # Ensure that your git status is not dirty
  ensure_git_status_clean
end

lane :beta do
  match(git_url: 'https://github.com/mlandauer/certificates',
        type: 'development')

  increment_build_number(
    build_number: latest_testflight_build_number + 1,
    xcodeproj: 'ios/ThatsCamping.xcodeproj'
  )

  # build your iOS app
  gym(
    scheme: 'ThatsCamping',
    export_method: 'app-store',
    project: 'ios/ThatsCamping.xcodeproj'
  )

  # upload to Testflight
  pilot
end
